!function(o,t,e){"use strict";function n(o){var e=o.getBoundingClientRect(),n=t.body,i=t.documentElement,l=p(),s=i.clientTop||n.clientTop||0,r=(i.clientLeft||n.clientLeft||0,e.top+l.top-s),f=e.bottom+l.top-s;return{top:Math.round(r),bottom:Math.round(f)}}var i,l=o.peekaboo,s={selector:"[data-peekaboo]",buffer:200,delay:0,animation:"slideInUp",animateOnInit:!0,resetAnimations:!0,callback:function(){}},r={windowDimensions:null,scrollPosition:{before:null,now:null},bufferZone:{top:null,bottom:null}},f=function(o,t,e){if("[object Object]"===Object.prototype.toString.call(o))for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&t.call(e,o[n],n,o);else for(var i=0,l=o.length;i<l;i++)t.call(e,o[i],i,o)},c=function(){var o={},t=!1,e=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],e++);for(var i=function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t&&"[object Object]"===Object.prototype.toString.call(e[n])?o[n]=c(!0,o[n],e[n]):o[n]=e[n])};e<n;e++){var l=arguments[e];i(l)}return o},p=function(){var e=o.pageYOffset||t.documentElement.scrollTop||t.body.scrollTop,n=o.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft;return{top:e?e:0,left:n?n:0}},b=function(o){var e=t.querySelectorAll(o),n=[];return f(e,function(o){o.classList.add("animated"),o.style.visibility="hidden",n.push({elem:o,position:{top:0,bottom:0},revealAnim:o.getAttribute("reveal")||o.getAttribute("data-reveal")||i.animation,revealDelay:o.getAttribute("reveal-delay")||o.getAttribute("data-reveal-delay")||i.delay})}),n},u=function(o){return o.sort(function(o,t){return o.position.top>t.position.top?1:o.position.top<t.position.top?-1:0}),o},a=function(o){setTimeout(function(){o.elem.style.visibility="",o.elem.classList.add(o.revealAnim)},o.revealDelay)};o.peekaboo=function(e,l){var m,d={},g={},h=function(o){console.log("eventThrottler"),m||(m=setTimeout(function(){m=null,"resize"===o.type?(console.log("resize"),d.setDistances(),d.update(!1,!1)):(console.log("Scrolling"),d.update(!1,!0))},66))};return"object"==typeof e?g=e:"string"==typeof e&&("object"==typeof l&&(g=l),g.selector=e),d.setDistances=function(){var e=p();r.windowDimensions={width:t.documentElement.clientWidth||t.body.clientWidth,height:t.documentElement.clientHeight||t.body.clientHeight},console.log("windowScrollPosition.top",e.top),console.log("settings.buffer",i.buffer),r.bufferZone.top=e.top+i.buffer,r.bufferZone.bottom=e.top+r.windowDimensions.height-i.buffer,o.scrollTo(0,0),f(this.elems,function(o){o.position=n(o.elem)}),o.scrollTo(e.left,e.top),this.elems=u(this.elems)},d.init=function(){if(console.log("*** INIT ***"),r.scrollPosition.now=r.scrollPosition.before=p(),d.elems=b(i.selector),0===d.elems.length)return void console.info("No elements matched the selector '"+i.selector+"'.");d.setDistances();r.scrollPosition.now.top+i.buffer,r.scrollPosition.now.top+r.windowDimensions.height-i.buffer;console.log("bufferZone.top",r.bufferZone.top,"bufferZone.bottom",r.bufferZone.bottom),f(this.elems,function(o){console.log("elem top",o.position.top,"elem bottom",o.position.bottom,o.elem),console.log("above & below",o.position.top>=r.bufferZone.top&&o.position.top<=r.bufferZone.bottom),console.log("bottom in view",o.position.bottom>=r.bufferZone.top&&o.position.bottom<=r.bufferZone.bottom),console.log("top in view",o.position.top<=r.bufferZone.top&&o.position.bottom>=r.bufferZone.bottom),o.position.top>=r.bufferZone.top&&o.position.top<=r.bufferZone.bottom||o.position.bottom>=r.bufferZone.top&&o.position.bottom<=r.bufferZone.bottom||o.position.top<=r.bufferZone.top&&o.position.bottom>=r.bufferZone.bottom?(o.elem.dataset.inView="true",i.animateOnInit&&(console.log("animate on init"),a(o))):o.elem.dataset.inView="false"})},d.update=function(o){console.log("*** UPDATE ***");var e=p();r.windowDimensions={width:t.documentElement.clientWidth||t.body.clientWidth,height:t.documentElement.clientHeight||t.body.clientHeight},r.bufferZone.top=e.top+i.buffer,r.bufferZone.bottom=e.top+r.windowDimensions.height-i.buffer,r.scrollPosition.before=r.scrollPosition.now,r.scrollPosition.now=p();o?r.scrollPosition.before.top<r.scrollPosition.now.top?"down":"up":null;f(this.elems,function(o){o.position.top>=r.bufferZone.top&&o.position.top<=r.bufferZone.bottom||o.position.bottom>=r.bufferZone.top&&o.position.bottom<=r.bufferZone.bottom||o.position.top<=r.bufferZone.top&&o.position.bottom>=r.bufferZone.bottom?(o.elem.dataset.inView="true",setTimeout(function(){o.elem.style.visibility="",o.elem.classList.add(o.revealAnim)},o.revealDelay)):o.elem.dataset.inView="false"})},i=c(s,g),d.init(),o.addEventListener("resize",h,!1),o.addEventListener("scroll",h,!1),d},peekaboo.noConflict=function(){return o.peekaboo=l,this}}(this,document);