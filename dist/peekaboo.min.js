!function(t,o,e){"use strict";function n(t){var e=t.getBoundingClientRect(),n=o.body,i=o.documentElement,l=c(),s=i.clientTop||n.clientTop||0,p=(i.clientLeft||n.clientLeft||0,e.top+l.top-s),r=e.bottom+l.top-s;return{top:Math.round(p),bottom:Math.round(r)}}var i,l=t.peekaboo,s={selector:"[data-peekaboo]",buffer:200,delay:0,animation:"slideInUp",animateOnInit:!0,resetAnimations:!0,callback:function(){}},p=function(t,o,e){if("[object Object]"===Object.prototype.toString.call(t))for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&o.call(e,t[n],n,t);else for(var i=0,l=t.length;i<l;i++)o.call(e,t[i],i,t)},r=function(){var t={},o=!1,e=0,n=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],e++);for(var i=function(e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(o&&"[object Object]"===Object.prototype.toString.call(e[n])?t[n]=r(!0,t[n],e[n]):t[n]=e[n])};e<n;e++){var l=arguments[e];i(l)}return t},c=function(){var e=t.pageYOffset||o.documentElement.scrollTop||o.body.scrollTop,n=t.pageXOffset||o.documentElement.scrollLeft||o.body.scrollLeft;return{top:e?e:0,left:n?n:0}},a=function(t){var e=o.querySelectorAll(t),n=[];return p(e,function(t){t.classList.add("animated"),t.style.visibility="hidden",n.push({elem:t,position:{top:0,bottom:0},revealAnim:t.getAttribute("reveal")||t.getAttribute("data-reveal")||i.animation,revealDelay:t.getAttribute("reveal-delay")||t.getAttribute("data-reveal-delay")||i.delay})}),n},m=function(t){return t.sort(function(t,o){return t.position.top>o.position.top?1:t.position.top<o.position.top?-1:0}),t},b=function(t){setTimeout(function(){t.elem.style.visibility="",t.elem.classList.add(t.revealAnim)},t.revealDelay)};t.peekaboo=function(e,l){var u,f,d={},g={before:c(),now:c()},h={top:null,bottom:null},v={},y=function(t){console.log("eventThrottler"),u||(u=setTimeout(function(){u=null,"resize"===t.type?(console.log("resize"),d.setDistances(),d.update(!1,!1)):(console.log("Scrolling"),d.update(!1,!0))},66))};return"object"==typeof e?v=e:"string"==typeof e&&("object"==typeof l&&(v=l),v.selector=e),d.setDistances=function(){var e=c();f={width:o.documentElement.clientWidth||o.body.clientWidth,height:o.documentElement.clientHeight||o.body.clientHeight},console.log("windowScrollPosition.top",e.top),console.log("settings.buffer",i.buffer),h.top=e.top+i.buffer,h.bottom=e.top+f.height-i.buffer,t.scrollTo(0,0),p(this.elems,function(t){t.position=n(t.elem)}),t.scrollTo(e.left,e.top),this.elems=m(this.elems)},d.init=function(){if(console.log("*** INIT ***"),d.elems=a(i.selector),0===d.elems.length)return void console.info("No elements matched the selector '"+i.selector+"'.");d.setDistances();g.now.top+i.buffer,g.now.top+f.height-i.buffer;console.log("bufferZone.top",h.top,"bufferZone.bottom",h.bottom),p(this.elems,function(t){console.log("elem top",t.position.top,"elem bottom",t.position.bottom,t.elem),console.log("above & below",t.position.top>=h.top&&t.position.top<=h.bottom),console.log("bottom in view",t.position.bottom>=h.top&&t.position.bottom<=h.bottom),console.log("top in view",t.position.top<=h.top&&t.position.bottom>=h.bottom),t.position.top>=h.top&&t.position.top<=h.bottom||t.position.bottom>=h.top&&t.position.bottom<=h.bottom||t.position.top<=h.top&&t.position.bottom>=h.bottom?(t.elem.dataset.inView="true",i.animateOnInit&&(console.log("animate on init"),b(t))):t.elem.dataset.inView="false"})},d.update=function(t){console.log("*** UPDATE ***");var e=c();f={width:o.documentElement.clientWidth||o.body.clientWidth,height:o.documentElement.clientHeight||o.body.clientHeight},h.top=e.top+i.buffer,h.bottom=e.top+f.height-i.buffer,g.before=g.now,g.now=c();t?g.before.top<g.now.top?"down":"up":null;p(this.elems,function(t){t.position.top>=h.top&&t.position.top<=h.bottom||t.position.bottom>=h.top&&t.position.bottom<=h.bottom||t.position.top<=h.top&&t.position.bottom>=h.bottom?(t.elem.dataset.inView="true",setTimeout(function(){t.elem.style.visibility="",t.elem.classList.add(t.revealAnim)},t.revealDelay)):t.elem.dataset.inView="false"})},i=r(s,v),d.init(),t.addEventListener("resize",y,!1),t.addEventListener("scroll",y,!1),d},peekaboo.noConflict=function(){return t.peekaboo=l,this}}(this,document);